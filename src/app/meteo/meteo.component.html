<div class="container">
  <div class="container-meteo">
    <div class="container-meteo-search">
      <input (keyup.enter)="searchCity()" [(ngModel)]=cityName class="form-control mr-sm-2" type="search" placeholder="Ville..?"
        aria-label="Search" required>
      <button class="btn btn-outline-success my-2 " (click)=searchCity()>Chercher</button>
    </div>
    <div *ngIf="city" class="alert alert-warning" role="alert">
      <strong>Oups! </strong>Entrez une ville.
    </div>
    <div *ngIf="error" class="alert alert-danger" role="alert">
      <strong>Erreur! </strong>Ville non trouvée!
    </div>
    <div class="container-meteo-content" *ngIf="weather">
      <div class="card meteo-group">
        <div class="card-header">
          <div class="title" (click)="MeteoDetailsToggle()">
            <h3>{{weather.name}} </h3><i class="fas fa-angle-down"></i>
          </div>
          <div *ngIf="meteodetails" class="meteo-info-details">
            <div class="pays">Location:<br> {{weather.sys.country | pays}}</div>
            <!-- <div class="espace"></div> -->
            <div class="location">
              <app-map-modal [map]="map"></app-map-modal>
            </div>
            <!-- <div class="espace"></div> -->

            <div class="timezone" *ngIf="timeZone">Heure locale:<br> {{timeZone.formatted | date: 'HH:mm'}}</div>
            <!-- <div class="location">
              <app-map-modal [map]="map"></app-map-modal>
            </div> -->
          </div>

          <!-- {{weather.main.temp | round}}°C -->
        </div>
        <div class="meteo-group-left">
          <span class="today">
            <h4>Aujourd'hui:</h4>
          </span>
          <img src="{{weather.weather[0].icon | meteoicon}}" alt="" width="120" height="120">
          <h5 class="card-title">{{weather.weather[0].description | capitalize}}</h5>
        </div>
        <div class="meteo-group-right">
          <div class="card-body">
            <div class="card-text details">
              <span>
                <img src="assets/meteo/icons/icon-umberella.png" alt="">{{weather.main.humidity}}%</span>
              <span>
                <img src="assets/meteo/icons/icon-wind.png" alt="">{{weather.wind.speed | round}} km/h</span>
              <span>
                <img src="assets/meteo/icons/icon-compass.png" alt="">{{weather.wind.deg | degwind}}</span>
            </div>
            <span>
              <button type="button" class="forecast btn btn-info" (click)=forecastToggle()>Prévisions</button>
            </span>
          </div>
          <div *ngIf="showMap">
          </div>
        </div>

      </div>
    </div>
    <div *ngIf="forecast">
      <app-meteo-details [weatherForecast]="weatherForecast"></app-meteo-details>
    </div>
    <div class="container-meteo-content" *ngIf="!weather">
      <div class="card meteo-group">
        <div class="meteo-group-left">
          <h5 class="card-header">Chargement..</h5>
          <h5 class="card-title"></h5>
        </div>
        <div class="meteo-group-right">
          <div class="card-body">
            <p>
              <app-loader></app-loader>
            </p>
            <div class="card-text details">
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
